{% extends "athletelayout.html" %}

{% block title %}
    Tommy
{% endblock %}

{% block main %}

<h1> Tommy's statistics </h1>
<p>Hello, World - this is Tommy.</p>

<h3> Bodyweight Tracking:</h3>

<canvas id="tommy-bw-graph" style="max-width: 60%;"></canvas>


<script>
    //TODO: Create JS objects for: 
    //1. const chartData = { labels as passed by the fetch functions + datasets in dictionary format }
    //2. const chartOptions = { configure options to be of type "time" + unit "month"  }
    //3. Tweak the new Chart code to include these two. 
    const chartData = {
        //Note that these labels currently state months by referring to the first day of the month (e.g 04/01/2023)
        labels: JSON.parse('{{ x_axis | tojson }}'),
        datasets: [{
            label: "Tommys Data", 
            data: [
                //k,v pair
                {x: '2023-02-15', y: 55},
                //k,v pair
                {x: '2023-03-15', y: 60},
                //k,v pair
                {x: '2023-04-15', y: 65},
            ]
        }]
    }; 

    const chartOptions = {
    scales: {
        x: {
        type: 'time',
        time: {
            unit: 'month',
            displayFormats: {
            month: 'MMM YYYY'
            }
        },
        //This should be set dynamically based on x_axis:
        min: JSON.parse('{{ minDate | tojson }}'),
        max: JSON.parse('{{ maxDate | tojson }}')
        },
        y: {
        ticks: {
            beginAtZero: true
        }
        }
    }
    };

    //Default graph dataset span will be 12 months:
    //const xValues =  JSON.parse('{{ x_axis | tojson }}');
    //const yValues = [50, 60, 70, 80, 90, 100]; 

    new Chart("tommy-bw-graph", {
        type: "line",
        data: chartData,
        options: chartOptions
    });
</script>

{% endblock %}

//Add an event listener button that can change the xValues that is passed in. 
//3-months:
//6 months: 
//12-months: 
//All-time: 
//add logic to display varying labels/headings to show the time range. 